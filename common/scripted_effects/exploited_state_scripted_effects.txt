exploit_seize_dockyards = {
	if = {
		limit = {
			if = {
				limit = { # this check needs to be here to stop about a million errors popping up even though it doesn't do anything
					is_subject = yes
				}
				overlord = {
					any_core_state = {
						is_coastal = yes
					}
				}
			}
		}

		every_owned_state = {
			limit = {
				dockyard > 0
			}
			set_temp_variable = {
				var = annexee_state_dockyard_count
				value = var:building_level@dockyard
			}
			remove_building = {
				type = dockyard
				level = var:building_level@dockyard
			}
			owner = {
				if = {
					limit = { # this check needs to be here to stop about a million errors popping up even though it doesn't do anything
						is_subject = yes
					}
					overlord = {
						random_core_state = {
							limit = {
								is_coastal = yes
								free_building_slots = {
									building = dockyard
									size > 1
									include_locked = yes
								}
							}
							add_extra_state_shared_building_slots = temp_var:annexee_state_dockyard_count
							add_building_construction = {
								type = dockyard
								level = temp_var:annexee_state_dockyard_count
								instant_build = yes
							}
						}
					}
				}
			}
		}
	}
}


exploit_dockyard_navy_tooltip = {
	custom_effect_tooltip = exploit_state_seize_dockyards_navy_tooltip
	if = {
		limit = {
			NOT = {
				any_core_state = {
					is_coastal = yes
				}
			}
		}
		custom_effect_tooltip = exploit_state_seize_dockyards_navy_no_coast_tooltip
	}
	if = {
		limit = {
			num_of_naval_factories < 1
		}
		custom_effect_tooltip = exploit_state_seize_dockyards_navy_no_dockyards_tooltip
	}
}